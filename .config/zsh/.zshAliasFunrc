# What should be the normal behaviour

alias cd..='cd ..'
alias :wq='exit'
alias cp='cp -iv'
alias mv='mv -iv'
alias rm='rm -v'
alias l='ls -lAhX --group-directories-first --color=auto'
alias ls='ls -F --color=auto'
alias e='exa -lah --time-style=long-iso --icons --colour-scale --group-directories-first --git'
alias et='exa -lah --icons --colour-scale --group-directories-first --git -T -L4'
alias bat='bat --italic-text=always'
alias plasma-restart='kquitapp5 plasmashell && sleep 1 && kstart5 plasmashell && sleep 1 && kwin_wayland --replace &'
alias ip='ip --color=auto'
alias grep='grep --color'
alias df="df -h -P --total --exclude-type=devtmpfs 2>/dev/null"
alias du='du -h'
alias free='free -m'

# Neovim
alias sn='sudo -E nvim'
alias n='nvim'
alias :e='nvim'
function no {
    nvim $(fzf --preview '([[ -f {} ]] && (bat --style=numbers --color=always {} || cat {})) || ([[ -d {} ]] && (exa -1T -L 8 {} | less)) || echo {} 2> /dev/null | head -200')
}
zle -N no
autoload -Uz no

# Clear the screen and re-run the last command on your history
function last-command {
    clear
    zle up-history
    zle accept-line
}
zle -N last-command

bindkey -M viins '^[r' last-command
bindkey -M vicmd '^[r' last-command

autoload -Uz last-command

function gacp() {
    command git add . && git commit -m "$@" && git push origin master
}

function okular-disown() {
    okular "$@" &; disown
}

function run() {
    "$@" < /dev/null &> /dev/null &; disown
}

# Extracting files
ex() {
    if [ -f $1 ] ; then
        case $1 in
            *.tar.bz2)   tar xjf $1   ;;
            *.tar.gz)    tar xzf $1   ;;
            *.tar.xz)    tar xJf $1   ;;
            *.bz2)       bunzip2 $1   ;;
            *.rar)       unrar x $1   ;;
            *.gz)        gunzip $1    ;;
            *.tar)       tar xf $1    ;;
            *.tbz2)      tar xjf $1   ;;
            *.tgz)       tar xzf $1   ;;
            *.zip)       unzip $1     ;;
            *.Z)         uncompress $1;;
            *.7z)        7z x $1      ;;
            *)           echo "'$1' cannot be extracted via ex()" ;;
        esac
    else
        echo "'$1' is not a valid file"
    fi
}
zle -N ex
autoload -Uz ex
